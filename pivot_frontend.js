const fs = require('fs');
const path = require('path');

// File paths
const files = {
    layout: path.join(__dirname, 'src', 'app', 'layout.tsx'),
    page: path.join(__dirname, 'src', 'app', 'page.tsx'),
    hero: path.join(__dirname, 'src', 'components', 'Hero.tsx'),
    navbar: path.join(__dirname, 'src', 'components', 'Navbar.tsx')
};

// Replacement rules
const replacements = [
    {
        file: files.layout,
        find: 'title: "Create Next App"',
        replace: 'title: "NADOO_AI: AI News & Trends"'
    },
    {
        file: files.layout,
        find: 'description: "Generated by create next app"',
        replace: 'description: "Latest AI news, tools, and insights curated by Nadoo AI."'
    },
    {
        file: files.page,
        find: 'Data-driven real estate insights.',
        replace: 'Data-driven AI trends & insights.'
    },
    {
        file: files.page,
        find: 'Real Estate Automation',
        replace: 'AI News & Automation'
    },
    {
        file: files.page,
        find: '#Real Estate',
        replace: '#AI News'
    },
    {
        file: files.page,
        find: 'Investment',
        replace: 'Generative AI'
    },
    {
        file: files.page,
        find: 'Gwangju',
        replace: 'LLM'
    },
    {
        file: files.hero,
        find: 'Real Estate Automation',
        replace: 'Future Tech & AI'
    },
    {
        file: files.hero,
        find: 'Í≥ÑÏïΩÏùÄ Ï§ëÍ∞úÏÇ¨Í∞Ä',
        replace: 'ÎπÑÏ¶àÎãàÏä§Îäî ÏÇ¨ÎûåÏù¥'
    },
    {
        file: files.hero,
        find: '"NADOO_AI ÏóêÏù¥Ï†ÑÌä∏"Î•º ÏúÑÌïú ÏôÑÎ≤ΩÌïú ÏÜîÎ£®ÏÖò.',
        replace: '"AI ÏãúÎåÄ Î¶¨Îçî"Î•º ÏúÑÌïú ÏôÑÎ≤ΩÌïú ÏßÄÏãù Ï∞ΩÍ≥†.'
    },
    {
        file: files.hero,
        find: 'Î∏îÎ°úÍ∑∏ Ìè¨Ïä§ÌåÖÎ∂ÄÌÑ∞ Í≥†Í∞ù Í¥ÄÎ¶¨ÍπåÏßÄ',
        replace: 'ÏµúÏã† AI Ìä∏Î†åÎìúÎ∂ÄÌÑ∞ Ïã§Î¨¥ ÌôúÏö©Î≤ïÍπåÏßÄ'
    }
];

function updateFiles() {
    console.log('üîÑ Starting Blog Pivot (Real Estate -> AI)...');

    replacements.forEach(rule => {
        try {
            if (fs.existsSync(rule.file)) {
                let content = fs.readFileSync(rule.file, 'utf8');

                // Check if already replaced
                if (content.includes(rule.replace)) {
                    console.log(`‚úÖ Already updated: ${path.basename(rule.file)}`);
                    return;
                }

                // Replace
                const regex = new RegExp(rule.find.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
                if (regex.test(content)) {
                    content = content.replace(regex, rule.replace);
                    fs.writeFileSync(rule.file, content, 'utf8');
                    console.log(`‚ú® Updated: ${path.basename(rule.file)}`);
                } else {
                    console.warn(`‚ö†Ô∏è Warning: Could not find string "${rule.find}" in ${path.basename(rule.file)}`);
                }
            } else {
                console.error(`‚ùå File not found: ${rule.file}`);
            }
        } catch (err) {
            console.error(`‚ùå Error updating ${rule.file}:`, err.message);
        }
    });

    console.log('\n‚úÖ Pivot Complete! Now push to GitHub to deploy.');
}

updateFiles();
